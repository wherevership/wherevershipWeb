<div id="masterContent" >
	<style>
.form-control-feedback.epi-info-circled { 
	position: absolute;
	padding-top: 10px;
	color: #d82b1f ;
	font-size: 18px;
}
</style>
<section style="background-color: #ebeced;">
<div class="container space">
	<div class="row">
    <div class="col-md-6 col-md-offset-3 col-xs-12">
		<div id="main_display">
      	<div class="SignupForm well">
		<h1>Forgot Login Email?</h1>
        <p>Enter your registered mobile number - we will send you the registered email address.</p>
			<div class="row ForgetEmail_SMS">
				<form onsubmit="return false;">
						<div class="row">
							<div class="col-md-4 col-xs-12 padding-left-off">
								<select class="form-control" name="mobile_code" style="height: 45px;">
								
								<option value="MY" >60 - Malaysia</option>
								
								<option value="SG" >65 - Singapore</option>
								
								<option value="AE" >971 - United Arab Emirates</option>
								
								<option value="AF" >93 - Afghanistan</option>
								
								<option value="AL" >355 - Albania</option>
								
								<option value="AM" >374 - Armenia</option>
								
								<option value="AN" >599 - Netherlands Ant Ille</option>
								
								<option value="AO" >244 - Angola</option>
								
								<option value="AR" >54 - Argentina</option>
								
								<option value="AU" >61 - Australia</option>
								
								<option value="CC" >61 - Cocos (Keeling) Isla</option>
								
								<option value="KI" >686 - Kribati</option>
								
								<option value="NR" >674 - Nauru</option>
								
								<option value="AQ" >672 - Antartica</option>
								
								<option value="AW" >297 - Aruba</option>
								
								<option value="AZ" >994 - Azerbaijan</option>
								
								<option value="BB" >+1 246 - Barbados</option>
								
								<option value="BD" >880 - Bangladesh</option>
								
								<option value="BG" >359 - Bulgaria</option>
								
								<option value="BH" >973 - Bahrain</option>
								
								<option value="BI" >257 - Burundi</option>
								
								<option value="BM" >+1 441 - Bermuda</option>
								
								<option value="BN" >673 - Brunei Darussalam</option>
								
								<option value="BO" >591 - Bolivia</option>
								
								<option value="BR" >55 - Brazil</option>
								
								<option value="BS" >+1 242 - Bahamas</option>
								
								<option value="BT" >975 - Bhutan</option>
								
								<option value="BW" >267 - Botswana</option>
								
								<option value="BY" >375 - Belarus</option>
								
								<option value="BZ" >501 - Belize</option>
								
								<option value="CA" >1 - Canada</option>
								
								<option value="ZR" >243 - Zaire</option>
								
								<option value="LI" >423 - Liechtenstein</option>
								
								<option value="CH" >41 - Switzerland</option>
								
								<option value="CL" >56 - Chile</option>
								
								<option value="CN" >86 - China</option>
								
								<option value="CO" >57 - Colombia</option>
								
								<option value="CR" >506 - Costa Rica</option>
								
								<option value="CU" >53 - Cuba</option>
								
								<option value="CV" >238 - Cape Verde</option>
								
								<option value="CZ" >420 - Czech Republic</option>
								
								<option value="DJ" >253 - Djibouti</option>
								
								<option value="DK" >45 - Denmark</option>
								
								<option value="FO" >298 - Faroe Islands</option>
								
								<option value="GL" >299 - Greenland</option>
								
								<option value="DO" >+1 809,1 8 - Dominican Republic</option>
								
								<option value="DZ" >213 - Algeria</option>
								
								<option value="EE" >372 - Estonia</option>
								
								<option value="EG" >20 - Egypt</option>
								
								<option value="ER" >291 - Eritrea</option>
								
								<option value="ET" >251 - Ethiopia</option>
								
								<option value="AD" >376 - Andorra</option>
								
								<option value="AT" >43 - Austria</option>
								
								<option value="BE" >32 - Belgium</option>
								
								<option value="CY" >357 - Cyprus</option>
								
								<option value="FI" >358 - Finland</option>
								
								<option value="FR" >33 - France</option>
								
								<option value="GF" >594 - French Guaina</option>
								
								<option value="RE" >262 - Reunion</option>
								
								<option value="DE" >49 - Germany</option>
								
								<option value="GR" >30 - Greece</option>
								
								<option value="GP" >590 - Guadeloupe</option>
								
								<option value="VA" >+39 06 698 - Holy Sea (Vatican Ci</option>
								
								<option value="IE" >353 - Ireland</option>
								
								<option value="IT" >39 - Italy</option>
								
								<option value="LU" >352 - Luxembourg</option>
								
								<option value="MT" >356 - Malta</option>
								
								<option value="MQ" >596 - Martinique</option>
								
								<option value="MC" >377 - Monaco</option>
								
								<option value="NL" >31 - Netherlands</option>
								
								<option value="PT" >351 - Portugal</option>
								
								<option value="SM" >378 - San Marino</option>
								
								<option value="SK" >421 - Slovakia</option>
								
								<option value="SI" >386 - Slovenia</option>
								
								<option value="ES" >34 - Spain</option>
								
								<option value="PM" >508 - St. Pierre And Mique</option>
								
								<option value="FJ" >679 - Fiji</option>
								
								<option value="FK" >500 - Falkland Islands (Ma</option>
								
								<option value="IO" >246 - British Indian Ocean</option>
								
								<option value="GB" >44 - United Kingdom/Engla</option>
								
								<option value="GE" >995 - Georgia</option>
								
								<option value="GH" >233 - Ghana</option>
								
								<option value="GI" >350 - Gibraltar</option>
								
								<option value="GM" >220 - Gambia</option>
								
								<option value="GQ" >224 - Equatorial Guinea</option>
								
								<option value="GT" >502 - Guatemela</option>
								
								<option value="GY" >592 - Guyana</option>
								
								<option value="HK" >852 - Hong Kong</option>
								
								<option value="HN" >504 - Honduras</option>
								
								<option value="HR" >385 - Crotia (Hrvatska)</option>
								
								<option value="HT" >509 - Haiti</option>
								
								<option value="HU" >36 - Hungary</option>
								
								<option value="TP" >670 - East Timor</option>
								
								<option value="ID" >62 - Indonesia</option>
								
								<option value="IL" >972 - Israel</option>
								
								<option value="IN" >91 - India</option>
								
								<option value="IQ" >964 - Iraq</option>
								
								<option value="IR" >98 - Iran</option>
								
								<option value="JM" >+1 876 - Jamaica</option>
								
								<option value="JO" >962 - Jordan</option>
								
								<option value="JP" >81 - Japan</option>
								
								<option value="KE" >254 - Kenya</option>
								
								<option value="KG" >996 - Kyrgzstan</option>
								
								<option value="KH" >855 - Cambodia</option>
								
								<option value="KM" >269 - Comoros</option>
								
								<option value="KP" >850 - Korea, Dem People's </option>
								
								<option value="KR" >82 - Korea Republic of</option>
								
								<option value="KW" >965 - Kuwait</option>
								
								<option value="KY" >+1 345 - Cayman Islands</option>
								
								<option value="KZ" >7 - Kazakhstan</option>
								
								<option value="LB" >961 - Lebanon</option>
								
								<option value="LK" >94 - Sri Lanka</option>
								
								<option value="LR" >231 - Liberia</option>
								
								<option value="LS" >266 - Lesotho</option>
								
								<option value="LT" >370 - Lithuania</option>
								
								<option value="LV" >371 - Latvia</option>
								
								<option value="LY" >218 - Libyan Arab Jamahiri</option>
								
								<option value="MA" >212 - Morroco</option>
								
								<option value="MD" >373 - Moldova, Republic Of</option>
								
								<option value="MG" >261 - Madacasgar</option>
								
								<option value="MK" >389 - Macedonia</option>
								
								<option value="MM" >95 - Myanmar</option>
								
								<option value="MN" >976 - Mongolia</option>
								
								<option value="MO" >853 - Macau</option>
								
								<option value="MR" >222 - Mauritania</option>
								
								<option value="MU" >230 - Mauritius</option>
								
								<option value="MV" >960 - Maldives</option>
								
								<option value="MW" >265 - Malawi</option>
								
								<option value="MX" >52 - Mexico</option>
								
								<option value="MZ" >258 - Mozambique</option>
								
								<option value="NA" >264 - Namibia</option>
								
								<option value="NG" >234 - Nigeria</option>
								
								<option value="NI" >505 - Nicaragua</option>
								
								<option value="NO" >47 - Norway</option>
								
								<option value="NP" >977 - Nepal</option>
								
								<option value="CK" >682 - Cook Islands</option>
								
								<option value="NZ" >64 - New Zealand</option>
								
								<option value="NU" >683 - Niue</option>
								
								<option value="PN" >64 - Pitcairn</option>
								
								<option value="TK" >690 - Tokelau</option>
								
								<option value="OM" >968 - Oman</option>
								
								<option value="PA" >507 - Panama</option>
								
								<option value="PE" >51 - Peru</option>
								
								<option value="PG" >675 - Papua New Guinea</option>
								
								<option value="PH" >63 - Philippines</option>
								
								<option value="PK" >92 - Pakistan</option>
								
								<option value="PL" >48 - Poland</option>
								
								<option value="PY" >595 - Paraguay</option>
								
								<option value="QA" >974 - Qatar</option>
								
								<option value="RO" >40 - Romania</option>
								
								<option value="RU" >7 - Russian Federation</option>
								
								<option value="RW" >250 - Rwanda</option>
								
								<option value="SA" >966 - Saudi Arabia</option>
								
								<option value="SB" >677 - Solomon Islands</option>
								
								<option value="SC" >248 - Seychelles</option>
								
								<option value="SD" >249 - Sudan</option>
								
								<option value="SE" >46 - Sweeden</option>
								
								<option value="SH" >290 - St.Helena</option>
								
								<option value="SL" >232 - Sierra Leonne</option>
								
								<option value="SO" >252 - Somalia</option>
								
								<option value="SR" >597 - Suriname</option>
								
								<option value="ST" >239 - Sao Tome and Pricipe</option>
								
								<option value="SV" >503 - El Salvador</option>
								
								<option value="SY" >963 - Syrian Arab Republic</option>
								
								<option value="SZ" >268 - Sw Aziland</option>
								
								<option value="TH" >66 - Thailand</option>
								
								<option value="TJ" >992 - Tajikistan</option>
								
								<option value="TM" >993 - Turkmenistan</option>
								
								<option value="TN" >216 - Tunisia</option>
								
								<option value="TO" >676 - Tonga</option>
								
								<option value="TR" >90 - Turkey</option>
								
								<option value="TT" >868 - Trinidad And Tobago</option>
								
								<option value="TV" >688 - Tuvalu</option>
								
								<option value="TW" >886 - Taiwan</option>
								
								<option value="TZ" >255 - Tanzania</option>
								
								<option value="UA" >380 - Ukraine</option>
								
								<option value="UG" >256 - Uganda</option>
								
								<option value="WS" >685 - Samoa</option>
								
								<option value="EC" >593 - Ecuador</option>
								
								<option value="GU" >+1 671 - Guam</option>
								
								<option value="MH" >692 - Marshall Islands</option>
								
								<option value="FM" >691 - Micronesia, Federate</option>
								
								<option value="MP" >+1 670 - Northern Marina Isla</option>
								
								<option value="PW" >680 - Palau</option>
								
								<option value="PR" >+1 787,1 9 - Puerto Rico</option>
								
								<option value="TC" >649 - Turks And Caicos Isl</option>
								
								<option value="US" >1 - United States</option>
								
								<option value="VG" >+1 284 - Virgin Islands (Brit</option>
								
								<option value="VI" >+1 340 - Virgin Islands (U.S)</option>
								
								<option value="UY" >598 - Uruguay</option>
								
								<option value="UZ" >998 - Uzbekistan</option>
								
								<option value="VE" >58 - Venezuela</option>
								
								<option value="VN" >84 - Vietnam</option>
								
								<option value="VU" >678 - Vanuatu</option>
								
								<option value="CM" >237 - Cameroon</option>
								
								<option value="CF" >236 - Central African Repu</option>
								
								<option value="TD" >235 - Chad</option>
								
								<option value="CG" >242 - Congo</option>
								
								<option value="GA" >241 - Gabon</option>
								
								<option value="AI" >+1 264 - Anguilla</option>
								
								<option value="AG" >+1 268 - Antigua and Barbuda</option>
								
								<option value="DM" >+1 767 - Dominica</option>
								
								<option value="GD" >+1 473 - Grenada</option>
								
								<option value="MS" >+1 664 - Montserrat</option>
								
								<option value="KN" >869 - Saint K Itts And Nev</option>
								
								<option value="LC" >+1 758 - Saint Lucia</option>
								
								<option value="VC" >784 - Saint Vincent, The G</option>
								
								<option value="BJ" >229 - Benin</option>
								
								<option value="BF" >226 - Burkina Faso</option>
								
								<option value="CI" >225 - Cote D'Ivore</option>
								
								<option value="GW" >245 - Guinea-Bissau</option>
								
								<option value="ML" >223 - Mali</option>
								
								<option value="NE" >227 - Niger</option>
								
								<option value="SN" >221 - Senegal</option>
								
								<option value="TG" >228 - Togo</option>
								
								<option value="PF" >689 - French Polynesia</option>
								
								<option value="NC" >687 - New Caledonia</option>
								
								<option value="WF" >681 - Wallis and Futuna Is</option>
								
								<option value="YE" >967 - Yemen</option>
								
								<option value="ZA" >27 - South Africa</option>
								
								<option value="ZM" >260 - Zambia</option>
								
								<option value="ZW" >263 - Zimbabwe</option>
								
								<option value="LA" >856 - Lao People's Democratic Republic</option>
								
								</select>
							</div>
							<div class="col-md-8 col-xs-12 input-group">
								<div class="has-feedback">
								<input type="text" class="form-control" name="txt_mobile" placeholder="Your Mobile Number" onkeypress="return event.charCode >= 48 && event.charCode <= 57" style="height: 45px;">
								<span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
								</div>
							</div>
                            <br>
                            <button class="btn btn-primary btn-lg" type="button" onclick="retrieveEmail()" style="width: 100%;">Send</button>
						</div>
				</form>
			</div>
		</div>
	</div>
	<br>
	<div id="button" style="text-align:center"></div>
	<div style="text-align:center; display:none">
		<div id="sms_code">
			<h4>Enter Security Code</h4>
			<div class="form-inline">
				<p>Please check your phone for a text message with your code. Your code is 6 characters long. </p>
				<input type="text" class="form-control" name="securityCode">
				<input type="button" class="btn btn-primary" onclick="verifycode()" value="Verify">
				<br><br>
			</div>
		</div>
	</div>
</div>
</div>
</div>
</section>
<div id="dialog"></div>
<script> 
function CheckNull(obj){
	var email  = $(".ForgetPasword_Email [name=txt_email]")
	
	if(General.isTextEmpty($(obj))){
		doFail(obj);
	}else{
		clearNull(obj);
	}
}

function doFail(obj){
	$(obj).addClass("fail");
	$(obj).removeClass("padding");
	$(obj).removeClass("pass");
	$(obj).css("border-color","#F00");
	$(obj).parent().children().eq(1).removeClass("hide");
}

function clearNull(obj){
	$(obj).removeClass("pass");
	$(obj).removeClass("fail");
	$(obj).removeClass("padding");
	$(obj).css("border-color","");
	$(obj).parent().children().eq(1).addClass("hide");
}

function verifycode(){
	message = title = "";
	var inputMobile = $("#main_display [name=inputMobile]").val();
	var inputMobileCode = $("#main_display [name=inputMobileCode]").val();
	var securityCode = $("#main_display [name=securityCode]");
	securityCode = $.trim(securityCode.val().replace(/\D/g,''));
	if(securityCode == "" || securityCode.length != 6){
		swal({
			title: 'Oops',
			type: 'error',
			html: 'Please insert a valid security code.',
			confirmButtonColor: '#4e97d8'
			})
	}else{
		$.ajax({
			type : "post",
			url : "./?ac=doCheckSecretCode",
			data : {
				securityCode : securityCode,
				code : inputMobileCode,
				mobile : inputMobile
			},
			success : function(result){
				if(result.substring(0,5) == "Click"){
					displayMessage = "<h4>Verify Success!</h4><div class='alert alert-info' role='alert'>"+result+"</div>";
					$("#main_display").html(displayMessage);
				}else if(result.substring(0,6) == "Sorry."){
					displayMessage = "<h4>Oops!</h4><div class='alert alert-info' role='alert'>"+result+"</div>"+'<hr><button class="btn btn-primary" onclick="reloadPage()" type="button">Retrieve Password Thru Email</button>';
					$("#main_display").html(displayMessage);
				}else{
					swal({
						title: 'Oops',
						type: 'error',
						html: 'Verification fail, please insert the valid security code.',
						confirmButtonColor: '#4e97d8'
						})
				}
			}
		});
	}
}

function retrieveEmail(){
	var mobile = $(".ForgetEmail_SMS [name=txt_mobile]");
	mobile = $.trim(mobile.val().replace(/\D/g,''));
	code = $("[name=mobile_code]").val();
	title = message = buttonMessage = "";
	if(mobile != ""){
		$.ajax({
			type : "post",
			url : "./?ac=doRetrieveEmailMobile",
			data : {
				code : code,
				mobile : mobile
			},
			success : function(result){
				if($.trim(result) == "pass"){
					title = "SMS Send Success";
					message = "We have sent you an SMS. Please check your message.<br>";
					swal({
						title: '' + title,
						type: 'success',
						html: '' + message,
						confirmButtonColor: '#4e97d8'
						})
					title = "<h1>SMS Send Success</h1>";
					message = "<div class='alert alert-info' role='alert'>We have sent you an SMS. Please check your message.<br></div>";
					buttonMessage = '<button class="btn btn-primary btn-lg" onclick="signPage()" type="button">Click To Login</button>';
					$("#main_display").html(title+message+buttonMessage);
				}else if($.trim(result) == "fail"){
					title = "<h1>Oops!</h1>";
					message = "<div class='alert alert-info' role='alert'>Sorry, the system cannot match your mobile number. You may contact our support team by clicking on the button below.</div>";
					buttonMessage = '<button class="btn btn-primary btn-lg" onclick="contactusPage()" type="button">Contact Support</button>';
					//buttonMessage += '&nbsp;<button class="btn btn-primary" onclick="location.reload();" type="button">Try again</button>';
				}else if(result.substring(0,6) == "Sorry."){
						title = "<h1>Oops!</h1>";
						message = "<div class='alert alert-info' role='alert'>"+result+"</div>";
						buttonMessage = '<button class="btn btn-primary" onclick="visitPage()" type="button">Return To Home</button>';
				}else{
					title = "<h1>Oops!</h1>";
					message = "<div class='alert alert-info' role='alert'>Sorry, our sms server is currently not accessible, Please try again later.</div>";
					buttonMessage = '<button class="btn btn-primary btn-lg" onclick="visitPage()" type="button">Return To Home</button>';
				}
				$("#main_display").html(title+message+buttonMessage);
			}
		}).fail(function(){
			title = "Oops!";
			message = "Sorry, our server is currently facing various issues. Please try again later.";
			$("#main_display").html('<button class="btn btn-primary btn-lg" onclick="visitPage()" type="button">Return To Home</button>');
		});
	}else{
		CheckNull($(".ForgetEmail_SMS [name=txt_mobile]"));
		message = "Warning: You have not entered an valid mobile number.";
		title = "Invalid Input Field";
	}
	
	if(message != ""){
		swal({
			title: '' + title,
			type: 'error',
			html: '' + message,
			confirmButtonColor: '#4e97d8'
			})
	}
}

function contactusPage(){
	window.location='./?pg=ContactUs';
}
function visitPage(){
	window.location='http://www.easyparcel.my';
}

function reloadPage(){
	window.location.reload();
}

function signPage(){
	window.location='./?pg=UserLogin';
}
</script>

</div>