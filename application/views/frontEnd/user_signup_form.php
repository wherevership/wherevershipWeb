<div class="container space">
 <div class="row">
            <form method="post" class="form-horizontal">
              <div class="col-md-6">
                <div class="form-group">
                  <label class="col-sm-4">First Name <span style="color:red;">*</span></label>
                  <div class="col-sm-8">
                    <div class="has-feedback">
                      <input class="form-control required" type="text" name="txt_first" value="" required placeholder="First Name"/>
                      <span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4">Last Name <span style="color:red;">*</span></label>
                  <div class="col-sm-8">
                    <div class="has-feedback">
                      <input class="form-control required" type="text" name="txt_last" value="" required placeholder="Last Name"/>
                      <span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4">Retype Email <span style="color:red;">*</span></label>
                  <div class="col-sm-8">
                    <div class="has-feedback">
                      <input class="form-control required" type="text" name="txt_email" value=""  required placeholder="Email"/>
                      <span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4">Password <span style="color:red;">*</span></label>
                  <div class="col-sm-8">
                    <div class="has-feedback">
                      <input class="form-control required" type="password" name="txt_pass" value="" required placeholder="Password"/>
                      <span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4">Re-Password <span style="color:red;">*</span></label>
                  <div class="col-sm-8">
                    <div class="has-feedback">
                      <input class="form-control required" type="password" name="txt_repass" value="" required placeholder="Re-enter Password"/>
                      <span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4">Mobile No. <span style="color:red;">*</span></label>
                  <div class="col-sm-4">
                  <!-- candy 19/09 -->
                  <select class="form-control" name="txt_code1" id="txt_code1">
                  <!-- candy 19/09 end -->
                  
                  <option value="MY" >60 - Malaysia</option>
                  
                  <option value="SG" >65 - Singapore</option>
                  
                  </select>
                </div>
                <div class="col-sm-4">
                  <div class="has-feedback">
                  <!-- candy 29/08 -->
                    <input class="form-control required" type="text" name="txt_mobile" id="number1" value="" maxlength="11" required placeholder="Eg : 17XXX4567" onkeyup="phoneValidate(this)" />
                    <span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
                  </div>
                  <div id="error"></div>
                </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4">Alternative Contact No. </label>
                  <div class="col-sm-4">
                  <select class="form-control" name="txt_code2">
                  
                  <option value="MY" >60 - Malaysia</option>
                  
                  <option value="SG" >65 - Singapore</option>
                  
                  </select>
                  </div>
                  <div class="col-sm-4">
                    <!-- candy 07/09 -->
                    <input class="form-control required" type="text" id="number2" name="txt_contact" value=""  maxlength="11" required placeholder="Eg : 17XXX4567" onkeyup="validateNumber(this)"/>
                    <!-- candy end -->
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="col-sm-4">Address <span style="color:red;">*</span></label>
                  <div class="col-sm-8">
                    <div class="has-feedback">
                      <input class="form-control required" type="text" name="txt_unit" value="" maxlength="35" required placeholder="Address Line 1">
                      <span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4"></label>
                  <div class="col-sm-8">
                  <input class="form-control required" type="text" name="txt_building" value="" maxlength="35" required placeholder="Address Line 2 (optional)">
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4"></label>
                  <div class="col-sm-8">
                    <input class="form-control required" type="text" name="txt_addr2" value="" maxlength="35" required placeholder="Address Line 3 (optional)"/>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4"></label>
                  <div class="col-sm-8">
                  <input class="form-control required" type="text" name="txt_addr3" value="" maxlength="35" required placeholder="Address Line 4 (optional)">
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4">Town/City<span style="color:red;">*</span></label>
                  <div class="col-sm-8">
                    <div class="has-feedback">
                      <input class="form-control required" type="text" name="txt_city" value="" required placeholder="Town / City"/>
                      <span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4">Zip/Postal Code<span style="color:red;">*</span></label>
                  <div class="col-sm-8">
                    <div class="has-feedback">
                      <input class="form-control required" type="text" name="txt_postcode" value="" onChange="postGetState(this)" required placeholder="Zip / Postal code"/>
                      <span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4">State<span style="color:red;">*</span></label>
                  <div class="col-sm-8">
                    <select class="form-control" name="txt_state">
                      
                      <option value="jhr" >Johor</option>
                      
                      <option value="kdh" >Kedah</option>
                      
                      <option value="ktn" >Kelantan</option>
                      
                      <option value="mlk" >Melaka</option>
                      
                      <option value="nsn" >Negeri Sembilan</option>
                      
                      <option value="phg" >Pahang</option>
                      
                      <option value="prk" >Perak</option>
                      
                      <option value="pls" >Perlis</option>
                      
                      <option value="png" >Pulau Pinang</option>
                      
                      <option value="sgr" >Selangor</option>
                      
                      <option value="trg" >Terengganu</option>
                      
                      <option value="kul" >Kuala Lumpur</option>
                      
                      <option value="pjy" >Putra Jaya</option>
                      
                      <option value="srw" >Sarawak</option>
                      
                      <option value="sbh" >Sabah</option>
                      
                      <option value="lbn" >Labuan</option>
                      
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-4">Country <span style="color:red;">*</span></label>
                  <div class="col-sm-8">
          <select class="form-control" name="txt_country">
                      <option value="Malaysia">Malaysia</option>
            <!--<option value="Singapore">Singapore</option>-->
                    </select>
                  </div>
                </div>
              </div>
            </form>
          </div>
		  
		   <h4>Supporting Documents</h4>

          <!-- Tab panes -->
          <div class="profile-bg">

          <p>Verify your account: </p>
              <div class="row">
                <div class="col-md-6 col-xs-12 form-group padding-off">
                    <label>I.C. Number <span style="color:red;">*</span></label>
                    <div class="has-feedback">
                      <input id="ic_no" class="form-control required" type="text" name="txt_ic_no" value="" required placeholder="example: 8XXXXX078877" title="Please enter your I.C. No."/>
                      <span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
                    </div>
                  
                  <!--input type="file" class="filestyle" data-classButton="btn btn-success" data-buttonText="Upload I.C." for="ic" id="upIC" /><span>  Maximum file size: 2MB  </span-->
                   
                </div>
              </div>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" id="forBiz" name="biz">For Business use </label>
            </div>
            <div id="business" class="profile-bg" style="display:none">
              <p>Verify your account via company detail:</p>
              <div class="row">
                <div>
                  <div class="col-md-6 col-sm-6 form-group padding-left-off">
                    <label>Company Name <span style="color:red;">*</span></label>
                    <div class="has-feedback">
                      <input id="1stCompName" class="form-control required" type="text" name="txt_comp_name" value="" required placeholder="Company Name" title="Please enter your Company Name" />
                      <span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
                    </div>
                  </div>
                  <div class="col-md-6 col-sm-6 form-group padding-left-off">
                    <label>Company Reg. No. <span style="color:red;">*</span></label>
                    <div class="has-feedback">
                      <input id="CompRegNo" class="form-control required" type="text" name="txt_comp_reg_no" value="" required placeholder="Company Registration No.*" title="Please enter Company Reg. No."/>
                      <span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
                    </div>
                  </div>
                   
                  
                  <!--input type="file" class="filestyle" data-classButton="btn btn-warning" data-buttonText="Upload SSM" for="ssm" id="upSSM"><span>  Maximum file size: 2MB  </span-->
                   
                </div>
                <div>
                  
                  <input type="file" class="filestyle" data-classButton="btn btn-primary btn-xs" data-buttonText="Upload Form 49" for="49" id="upForm49" /><span>  Maximum file size: 2MB  </span>
                   
                </div>
                <!-- /input-group --> 
              </div>
              <!-- /.col-lg-6 --> 
            </div>
          <hr />
          <div class="clearfix">
            <div class="checkbox">
              <label>
                <input type="checkbox" name="acceptTerm">
                I accept the <a href="./?pg=TermAndCond">Terms and Conditions</a> </label>
            </div>
            <input type="button" class="btn btn-primary btn-lg" value="Save And Get Started" onclick="SaveDetail()">
          </div>
       
<div id="dialog"></div>
</div>
<script>
$( ".DetailFrom [name=txt_addr2]" ).autocomplete({
  source : function(request, response){
    var url = "./?ac=StreetAutoComplete&street="+request.term;
    $.ajax({
      type : "get",
      url : url,
      success : function(data){
        //*
        response( $.map(data, function(item){
          return {
            label : item.street + " ("+ item.state +")",
            value : item.street,
            state : item.state_code,
            postcode : item.postcode
          }
        }));//*/
      }
    });
  },
  select : function (event , ui){
    $(".DetailFrom [name=txt_postcode]").val(ui.item.postcode);
    $(".DetailFrom [name=txt_state]").val(ui.item.state);
  }
});

function postGetState(obj){
  var str = $(obj).val();
  str = str.replace(/[^0-9]+/g,'');
  $(obj).val(str);
  if(str.length == 5){
    $.ajax({
      type  : "post",
      url : "./?ac=doGetState",
      async : false,
      data : {
        postcode : str,
      },
      success : function(result){
        if(result!="No State Available"){
          $(".DetailFrom [name=txt_state]").val(result);
        }
      }
    });
  }
}

function SkipDetail(){
  General.loadAjax(
    'get',
    './?ac=doSkipFirstTime',
    '',
    function(result){
      window.location.reload();
    }
  );
}


function SaveDetail(){
  var 
  type = "post",
  url = "./?ac=doSaveFirstTimeDetail",
  data = {
    userid : "MTg4NDcz",
    first_name : $(".DetailFrom [name=txt_first]").val().trim(),
    last_name : $(".DetailFrom [name=txt_last]").val().trim(),
    email : $(".DetailFrom [name=txt_email]").val().trim(),
    pass : $(".DetailFrom [name=txt_pass]").val(),
    repass : $(".DetailFrom [name=txt_repass]").val(),
    mobile : $(".DetailFrom [name=txt_mobile]").val().replace(/\D/g,''),
    contact : $(".DetailFrom [name=txt_contact]").val().replace(/\D/g,''),
    code1 : $(".DetailFrom [name=txt_code1]").val(),
    code2 : $(".DetailFrom [name=txt_code2]").val(),
    ic_no : ($(".DetailFrom [name=txt_ic_no]").val().replace(/-/g,'')),
    comp_name : $(".DetailFrom [name=txt_comp_name]").val(),
    comp_reg_no : $(".DetailFrom [name=txt_comp_reg_no]").val(),
    
    unit : $(".DetailFrom [name=txt_unit]").val(),
    floor : $(".DetailFrom [name=txt_floor]").val(),
    block : $(".DetailFrom [name=txt_block]").val(),
    building : $(".DetailFrom [name=txt_building]").val(),
    addr2 : $(".DetailFrom [name=txt_addr2]").val(),
    addr3 : $(".DetailFrom [name=txt_addr3]").val(),
    city : $(".DetailFrom [name=txt_city]").val(),
    state : $(".DetailFrom [name=txt_state]").val(),
    postcode : $(".DetailFrom [name=txt_postcode]").val(),
    country : $(".DetailFrom [name=txt_country]").val()
  },
  
  callback = function(result){
    if(result == "pass"){
      window.location.href = "./?pg=MyAccount&tab=UserVerifyAccount&first";
    }else if(result == "mobile_fail"){
      swal({
        title: 'Error',
        type: 'error',
        html: 'The mobile you entered is already exist.\nPlease key-in another mobile number or contact our customer support.',
        confirmButtonColor: '#4e97d8'
      }).then(function() {
          window.location.reload();
      });
    }else{
      swal({
        title: 'Error',
        type: 'error',
        html: 'Fail to save your details.',
        confirmButtonColor: '#4e97d8'
      }).then(function() {
          window.location.reload();
      });
    }
  };
  if(validateSaveDetail(data)){
    var originalEmail = "lcg1989@hk3.com.my";
    originalEmail = originalEmail.toLowerCase();
    if(data.email.toLowerCase() != originalEmail){
      $.ajax({
        type: "POST",
        url: "./?ac=CheckUserEmail",
        data : { 
          email : data.email
        },
        async : false,
        success:function(response){
          if(response == "pass"){
            swal({
              title: 'Different Email Inserted',
              type: "warning",
              text: "Different Email Inserted (Original : lcg1989@hk3.com.my). Do you wish to continue with "+data.email+"?",
              showCancelButton: true,
              confirmButtonColor: '#3085d6',
              cancelButtonText: "Cancel"
            }).then(function() {
                General.loadAjax(type,url,data,callback);  
            });
          }else{
            swal({
              title: 'Oops',
              type: 'error',
              html: "Another User With This Email Already Exists. If It Is You, Kindly Log In With The Email Or Click <br><a href='./?pg=MemberForgotPassword'><b><u>HERE</u></b></a> To Reset A New Password.",
              confirmButtonColor: '#4e97d8'
            });
          }
        }
      });
      
      
    }else{
      General.loadAjax(type,url,data,callback); 
    }
  }
}

function validateSaveDetail(datas){
  var pass = true;
  var message = "";
  var variable = "";
  clearClass();
  
  if($("[name=biz]").is(":checked")){
    if(datas.comp_name == ""){
      pass = false;
      doFail($("[name=txt_comp_name]"));
      message += "Please Fill In Your Company Name.<br>";
      variable = "[name=txt_comp_name]";  
    }
    if(datas.comp_reg_no == ""){
      pass = false;
      doFail($("[name=txt_comp_reg_no]"));
      message += "Please Fill In Your Company Registration Number.<br>";
      variable = "[name=txt_comp_reg_no]";
    }
  }

  if(datas.ic_no == ""){
    pass = false;
    doFail($("[name=txt_ic_no]"));
    message += "Please Fill In Your IC Number.<br>";
    variable = "[name=txt_ic_no]";
  }

  if(datas.country == ""){
    pass = false;
    doFail($("[name=txt_country]"));
    message += "Please Fill In Your Country Name.<br>";
    variable = "[name=txt_country]";
  }
  if(datas.state == ""){
    pass = false;
    doFail($("[name=txt_country]"));
    message += "Please Fill In Your State Name.<br>";
    variable = "[name=txt_country]";
  }

  if(datas.contact != ""){
    if(datas.code2 == "MY"){
      if(((datas.contact).length > 10 || (datas.contact).length < 8)){
        pass = false;
        swal({
          title: 'Oops',
          type: 'error',
          html: 'Please Enter An Valid Alternative Mobile No. (9 to 10 digits)<br>',
          confirmButtonColor: '#4e97d8'
          })
        doFail($("[name=txt_other]"));
        $("html, body").animate({ scrollTop: $("[name=txt_other]").offset().top - 70 }, 1000);
      }
    }else if (datas.code2 == "SG"){
      if((datas.contact).length != 8){
        pass = false;
        swal({
          title: 'Oops',
          type: 'error',
          html: 'Please Enter An Valid Alternative Mobile No. (8 digits)<br>',
          confirmButtonColor: '#4e97d8'
          })
        doFail($("[name=txt_other]"));
        $("html, body").animate({ scrollTop: $("[name=txt_other]").offset().top - 70 }, 1000);
      }
    }
  }
  if(datas.postcode == ""){
    pass = false;
    doFail($("[name=txt_postcode]"));
    message += "Please Fill In Your Zip/Postal Code.<br>";
    variable = "[name=txt_postcode]";
  }
  if(datas.mobile == ""){
    pass = false;
    doFail($("[name=txt_mobile]"));
    message += "Please Fill In Your Mobile Number.<br>";
    variable = "[name=txt_mobile]";
  }else{
    if(datas.code1 == "MY"){
      // candy 29/08
      // if((datas.mobile.indexOf("1") != 0) || ((datas.mobile).length > 10 || (datas.mobile).length < 9)){
        //candy 19/09 
        if($("#error").html() != '' || ((datas.mobile).length > 11 || (datas.mobile).length < 9)){
        //candy 19/09 end 
        pass = false;
        swal({
          title: 'Oops',
          type: 'error',
          html: 'Please Enter An Valid Mobile No. for future account verification purpose.<br>',
          confirmButtonColor: '#4e97d8'
          })
        doFail($("[name=txt_mobile]"));
        $("html, body").animate({ scrollTop: $("[name=txt_mobile]").offset().top - 70 }, 1000);
      }
      //candy end
    }else if (datas.code1 == "SG"){
      if((datas.mobile).length != 8){
        pass = false;
        swal({
          title: 'Oops',
          type: 'error',
          html: 'Please Enter An Valid Mobile No. (8 digits)<br>', 
          confirmButtonColor: '#4e97d8'
          })
        doFail($("[name=txt_mobile]"));
        $("html, body").animate({ scrollTop: $("[name=txt_mobile]").offset().top - 70 }, 1000);
      }
    }
  }
  if(datas.city == ""){
    pass = false;
    doFail($("[name=txt_city]"));
    message += "Please Fill In Your Town/City Name.<br>";
    variable = "[name=txt_city]";
  }
  if(datas.repass == ""){
    pass = false;
    doFail($("[name=txt_repass]"));
    message += "Please Fill In Your Password.<br>";
    variable = "[name=txt_repass]";
  }
  if(datas.pass == ""){
    pass = false;
    doFail($("[name=txt_pass]"));
    message += "Please Fill In Your Password.<br>";
    variable = "[name=txt_pass]";
  }else{
    if(datas.pass != datas.repass){
      pass = false;
      doFail($("[name=txt_repass]"));
      swal({
        title: 'Oops',
        type: 'error',
        html: 'Both password you have entered are not same.<br>',
        confirmButtonColor: '#4e97d8'
      })
      $("html, body").animate({ scrollTop: $("[name=txt_repass]").offset().top - 70 }, 1000);
    }
  }
  if(datas.email == ""){
    pass = false;
    doFail($("[name=txt_email]"));
    message += "Please Fill In Your Register Email.<br>";
    variable = "[name=txt_email]";
  }else if(!General.validateEmail(datas.email)){
    pass = false;
    doFail($("[name=txt_email]"));
    swal({
      title: 'Oops',
      type: 'error',
      html: 'Please Insert A Valid Email Address.<br>',
      confirmButtonColor: '#4e97d8'
      })
    $("html, body").animate({ scrollTop: $("[name=txt_email]").offset().top - 70 }, 1000);
  }
  if(datas.last_name == ""){
    pass = false;
    doFail($("[name=txt_last]"));
    message += "Please Fill In Your Last Name.<br>";
    variable = "[name=txt_last]";
  }
  if(datas.unit == ""){
    pass = false;
    doFail($("[name=txt_unit]"));
    message += "Please Fill In Your Address.<br>";
    variable = "[name=txt_unit]";
  }
  if(datas.first_name == ""){
    pass = false;
    doFail($("[name=txt_first]"));
    message += "Please Fill In Your First Name.<br>";
    variable = "[name=txt_first]";
  }

  if(pass){
    $.ajax({
      type  : "post",
      url : "./?ac=checkPostcode",
      async : false,
      data : {
        cpostcode : datas.postcode,
        cstate : datas.state,
        dpostcode : '',
        dstate : ''
      },
      success : function(result){
        if(result == true){
          pass = true;
        }else{
          swal({
            title: 'Oops',
            type: 'error',
            html: '' + result,
            confirmButtonColor: '#4e97d8'
          });
          doFail($("[name=txt_postcode]"));
          $("html, body").animate({ scrollTop: $("[name=txt_postcode]").offset().top - 70 }, 1000);
          pass = false;
        }
      },
      fail : function(result){
          swal({
            title: 'Oops',
            type: 'error',
            html: 'Something Went Wrong. Please Try Again. If Problem Persist, Please Contact Our Customer Service.<br>',
            confirmButtonColor: '#4e97d8'
          });
          status=false;
        }
      });
  }

  if(pass){
    var term = $("[name=acceptTerm]");
    pass = term.is(":checked");
    if(pass==false){
      swal({
        title: 'Oops',
        type: 'error',
        html: 'You must agree with the Terms and Conditions to use this product.<br>',
        confirmButtonColor: '#4e97d8'
      });
    }
  }
  if(message!=""){
    $("html, body").animate({ scrollTop: $(variable).offset().top - 70 }, 1000);
    swal({
      title: 'Oops',
      type: 'error',
      html: 'Please fill in all required details.<br>',
      confirmButtonColor: '#4e97d8'
    });
  }
  return pass;  
}

function clearClass(){
  var names = ["txt_first","txt_unit","txt_last","txt_email","txt_repass","txt_pass","txt_city",
    "txt_mobile","txt_postcode","txt_other","txt_state","txt_country","txt_ic_no","txt_comp_name","txt_comp_reg_no"];
  for (i = 0; i < names.length; i++) { 
    $("[name="+names[i]+"]").removeClass("pass");
    $("[name="+names[i]+"]").removeClass("fail");
    $("[name="+names[i]+"]").removeClass("padding");
    $("[name="+names[i]+"]").css("border-color","");
    $("[name="+names[i]+"]").parent().children().eq(1).addClass("hide");
  }
}

function doFail(obj){
  $(obj).addClass("fail");
  $(obj).removeClass("padding");
  $(obj).removeClass("pass");
  $(obj).css("border-color","#F00");
  $(obj).parent().children().eq(1).removeClass("hide");
}

function DeleteImage(obj){
  $("[for="+$(obj).attr("for")+"]").parent().parent().append(
    '<input type="file" class="filestyle" data-classButton="btn btn-warning" '+
    'data-buttonText="Upload '+$(obj).attr("for").toUpperCase()+'" for="'+$(obj).attr("for")+'" id="up'+$(obj).attr("for").toUpperCase()+'"><span>  Maximum file size: 2MB</span>'
  );
  $("#"+$(obj).attr("for").toLowerCase()+"_uploaded").remove();
  $(obj).parent().remove();
  profile.InitialUpload($("#up"+$(obj).attr("for").toUpperCase()));
  $("#up"+$(obj).attr("for").toUpperCase()).filestyle({
    input: false,
    buttonText: "Upload "+$(obj).attr("for").toUpperCase(),
    classButton: "btn btn-primary"
  });
}

var profile = {
InitialUpload : function(obj){
    var url = "./?ac=doFileUpload" + "&for=" + $(obj).attr("for");
    $(obj).fileupload({
      url: url,
      dataType: 'html',
      add : function(e,data){
        data.submit();
        swal({   
          title: "Loading",   
          text: "<div id='progress' class='progress progress-bar-info progress-bar-striped' style='background-color: #4CAF50'><div class='progress-bar' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: width: 100%'></div></div>",  
          timer: 3000,
          showConfirmButton: false          
        });
        var elem = document.getElementById("progress");   
        var width = 1;
        var id = setInterval(frame, 20);
        function frame() {
          if (width >= 100){
            clearInterval(id);
          }else{
            width++; 
            elem.style.width = width + '%'; 
            $('#progress').html(width + "%" );
          } 
        }
      },
      done: function (e, data) {
        var returnval = data.result.split("::");
        if(returnval[0] == 1){
          $("[for="+$(obj).attr("for")+"]").parent().html( 
            '<a id="'+$(obj).attr("for").toLowerCase()+'_uploaded" href="' + returnval[1] + 
            '" target="_blank">'+ $(obj).attr("for").toUpperCase() +' Uploaded</a>' 
            +' <small><a href="#" for="' + $(obj).attr("for") + '" onclick="DeleteImage(this); return false;">Delete</a></small>'
          );
          $("[for=" + $(obj).attr("id") + "]").parent().remove();
          $("#up"+$(obj).attr("for").toUpperCase()).remove();
        }else{
          swal({
            title: 'Upload Error',
            type: 'error',
            html: 'Upload Error, Please Reselect A Valid File.',
            confirmButtonColor: '#4e97d8'
          });
        }
      },
      
      progressall: function (e, data) {
        var progress = parseInt(data.loaded / data.total * 100, 10);
      }
    }).prop('disabled', !$.support.fileInput)
    .parent().addClass($.support.fileInput ? undefined : 'disabled');
  }
}

$("#upIC").filestyle({
  buttonText: "Upload I.C.",
  classButton: "btn btn-success"
});

$("#upSSM").filestyle({
  buttonText: "Upload SSM",
  classButton: "btn btn-warning"
});

$("#upForm49").filestyle({
  input: false,
  buttonText: "Upload Form 49",
  classButton: "btn btn-primary"
});

profile.InitialUpload($("#upIC"));
profile.InitialUpload($("#upSSM"));
profile.InitialUpload($("#upForm49"));

$('#forBiz').click(function () {
    $("#business").toggle(this.checked);
});

// $(document).ready(function () {
//   //called when key is down
//   $("#number1, #number2").bind("keydown", function (event) {
//     if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 ||
//              // Allow: Ctrl+A
//             (event.keyCode == 65 && event.ctrlKey === true) || 
 
//         // Allow: home, end, left, right
//             (event.keyCode >= 35 && event.keyCode <= 39)) {
//               // let it happen, don't do anything
//               return;
//         } else {
//             // Ensure that it is a number and stop the keypress
//             if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
//                 event.preventDefault();
//             }
//         }
//    });
// });

// candy 29/08
function doNormal(obj){
  $(obj).removeClass("fail");
  $(obj).removeAttr("style");
  $(obj).parent().children().eq(1).addClass("hide");
  $("#error").html("");
}

function validateNumber(obj){
  var str = $(obj).val();
  str = str.replace(/[^0-9]+/g,'');
  $(obj).val(str);
}

//candy 19/09 Replace this function
function phoneValidate(obj){
  var str = $(obj).val();
      c_code = document.getElementById("txt_code1").value;
      data = { mobile : str,
               c_code : c_code };

    $.ajax({
    type: "post",
    url: "./?ac=doPhoneNoValidate",
    data: data,
    processData: true,
    success:function(result){
      if(result == "fail"){
        doFail(obj);
        $("#error").html("<font color='red'>* Invalid number</font>");
      }else{
        doNormal(obj);   
      }
    }
  })
}
//candy 19/09 - end
//candy - end
</script>
</div>
<div id="mainTrackResult"></div>