<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>WHEREVERSHIP | Delivery Made Easy</title>
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="css/bootstrap-select.min.css" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet">
		
		
		<script type="text/javascript" src="js/jquery-1.12.1.min.js"></script>
		<script type="text/javascript" src="js/jquery-migrate-1.2.1.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.js"></script>
	
	<head>
	<style>
		.welcomelabel {
			background-color: #00a9b0;
			padding: 1px 0;
		}
		
		.welcomelabel h4 {
			text-align: center;
			color: #fff;
		}
		
		</script>
function displayMainMenu(){
	var currentStyle = document.getElementById("masterContent").style.display;
	if(currentStyle == "none"){
		document.getElementById("masterContent").style.display = "";
		document.getElementById("masterFooter").style.display = "";
		document.getElementById("MasterMobileMenu").style.display = "none";
	}else{
		document.getElementById("masterContent").style.display = "none";
		document.getElementById("masterFooter").style.display = "none";
		document.getElementById("MasterMobileMenu").style.display = "";
	}
	$('html,body').scrollTop(0);
}

function sticky_relocate() {
    var window_top = $(window).scrollTop();
    var div_top = $('#sticky-anchor').offset().top;
	var div_top_mobile = $('#sticky-anchor-mobile').offset().top;
	 
}

$(function () {
	$(window).scroll(sticky_relocate);
    sticky_relocate();
	$(window).on('resize', function() {
		if($(window).width() > 767){
			document.getElementById("MasterMobileMenu").style.display = "none";
			document.getElementById("masterContent").style.display = "";
			document.getElementById("masterFooter").style.display = "";
		}
	});
	
	$(window).focus(function() {
		if($(window).width() > 767){
			document.getElementById("MasterMobileMenu").style.display = "none";
			document.getElementById("masterContent").style.display = "";
			document.getElementById("masterFooter").style.display = "";
		}
	});
});
</script> 
	
	</style>
	<body>
		<div id="sticky-anchor"></div>
		<div id="sticky-anchor-mobile"></div>
		<div class="welcomelabel">
		<h4>Welcome Micropop!</h4>
		</div>
		<div class="container-fluid space-small">
	
		<div class="col-md-2 padding-off hidden-xs hidden-sm">
			<style>
		.list-group-item:first-child, .list-group-item:last-child { border-radius: 0px;}
		.list-group {border: 1px solid #ddd; margin-bottom: 0px;}
		a.list-group-item, button.list-group-item {
			padding-left: 15px;
			padding-right: 10px;
		}
		.list-group-item, .list-group-item:focus, .list-group-item:hover {
			z-index: 2;
			color: #555;
			background-color: #f9f9f9;
			border-color: #f9f9f9;
		}
		.list-group-item:hover {
			background-color: #e8e8e8;
			color: #000;
			font-weight: 400;
			border-left: 5px solid #00a9b0;
			border-top-left-radius: 0px;
			border-top-right-radius: 0px;
		}
		.list-group-item>.badge, .nav-pills>a>.badge {
			color: #FFFFFF;
			background-color: #f69;
		}
		.list-group-item.active, .list-group-item.active:focus, .list-group-item.active:hover {
			z-index: 2;
			color: #000;
			background-color: transparent;
			border: 0px;
			border-radius: 0px;
			padding-left: 10px;
			padding-right: 10px;
		}

		.list-group-item.selected, .list-group-item.selected:hover {
			background-color: #f5f5f5;
			border-left: 5px solid #00a9b0;
			font-weight: normal;
			color: #555;
			padding-left: 15px;
		}

		.list-group-item.selected>.badge, .nav-pills>.selected>a>.badge {
			color: #fff;
			background-color: #f69;
		}

		.focusQuickQuoteBlock { 
			height: 100%;
			width: 0;
			position: fixed;
			z-index: 1000;
			left: 0;
			top: 0;
			background-color: rgba(0,0,0, 0.85);
			overflow-x: hidden;
		}

		ul.list-group.btn {
			width: 100%;
			border-radius: 0px;
			text-align: left;
			background-color: #f9f9f9;
			border: 0px;
			border-left: 1px solid #ddd;
			border-right: 1px solid #ddd;
			border-bottom: 1px solid #ddd;
			background-color: #f1f1f1;
			padding-right: 0px;
		}

	.ep-nav-tab .ep-cont {
		background-color: #fff;
	}
	
	.logo {
				background-image: url(http://wherevership.com/assets2/image/logo.png);
				background-size: 140px;
				background-position: center top;
				background-repeat: no-repeat;
				height: 140px;
				font-size: 20px;
				display: block
				
				
			}
	
	@media (min-width:992px) and (max-width:1199px) {
		.list-group-item.active, .list-group-item.active:focus, .list-group-item.active:hover {
			padding-left: 2px;
			padding-right: 2px;
		}
		a.list-group-item, button.list-group-item {
			padding-left: 5px;
			padding-right: 0px;
		}
	}
	</style>
	

			<div class="row">
				<a>
					<img src="http://wherevership.com/assets2/image/logo.png" class="logo hidden-xs" style="text-align:center;">
				</a>
				<div style="border-top: 1px solid #ddd;">	
					<ul class="list-group">
						<a href="<?=base_url('user_panel')?>" class="active selected list-group-item">
							<i class="fas fa-home"></i> Dashboard
					</a>
				</ul>
			</div>

				<div style="border-top: 1px solid #ddd;">
					<ul class="list-group btn" data  -toggle="collapse" data-target="#SendParcel" aria-expanded="false" aria-controls="collapseExample">
						<a class="list-group-item active">
							<i class="fas fa-truck"></i> Send Parcel<i class="epi-plus-squared-alt epi pull-right"></i>
						</a>
					</ul>
					<div>
						<div class="collapse dropdown" id="SendParcel">
							<ul class="list-group">
								<a onclick="focusQuickQuote()" class="list-group-item" style="cursor: pointer;" id="Send_A_Parcel">Send A Parcel</a>
  	
								<a href="" class="[:ac_bulkupload:] list-group-item" id ="Bulk_Upload">Bulk Upload</a>
							</ul>
						</div>
					</div>
				</div>

				<div style="border-top: 1px solid #ddd;">	
					<ul class="list-group btn" data-toggle="collapse" data-target="#MyBookings" aria-expanded="false" aria-controls="collapseExample">
						<a class="list-group-item active">
						<i class="fas fa-shopping-cart"></i> My Cart<i class="epi-plus-squared-alt epi pull-right"></i>
						</a>
					</ul>

					<div class="collapse dropdown" id="MyBookings">
						<ul class="list-group">
							<a href="" class="[:ac_book_pending:] list-group-item" id="Pending_Bookings">Pending Items <span class="badge" id="pending">0</span></a>
							<a href="" class="[:ac_book_expired:] list-group-item" id="Expired_Bookings">Action Required <span class="badge" id="expire">0</span></a>
						</ul>
					</div>
				</div>

				<div style="border-top: 1px solid #ddd;">	
					<ul class="list-group btn" data-toggle="collapse" data-target="#MyOrders" aria-expanded="false" aria-controls="collapseExample">
						<a class="list-group-item active">
							<i class="fas fa-shopping-cart"></i> My Orders<i class="epi-plus-squared-alt epi pull-right"></i>
						</a>
					</ul>

					<div class="collapse dropdown" id="MyOrders">
						<ul class="list-group">
							<a href="" class=" list-group-item" id="Unpaid_Order_Invoices" >
								Unpaid Orders
								<span class="badge" id="unpaid">0</span>
							</a>
							<a href="" class=" list-group-item" id="Partialpaid_Order_Invoices" >
								Partial Paid Orders <span class="badge" id="partialpaid">0</span></a>
							<a href="" class=" list-group-item" id="Order_Invoices">Invoices
							</a>
						</ul>
					</div>
				</div>

				<div style="border-top: 1px solid #ddd;">	
					<ul class="list-group btn" data-toggle="collapse" data-target="#AllShipments" aria-expanded="false" aria-controls="collapseExample">
						<a class="list-group-item active">
							<i class="fas fa-truck"></i> All Shipments<i class="epi-plus-squared-alt epi pull-right"></i>
						</a>
					</ul>

					<div class="collapse dropdown" id="AllShipments">
						<ul class="list-group">
							<a href="<?=base_url('domestic_report')?>" class=" list-group-item" id="Domestic">Domestic</a>
  	
							<a href="<?=base_url('international_report')?>" class=" list-group-item" id="International">International</a>
	  	
						</ul>
					</div>
				</div>

				<div style="border-top: 1px solid #ddd;">	
					<ul class="list-group btn" data-toggle="collapse" data-target="#MyCredits" aria-expanded="false" aria-controls="collapseExample">
						<a class="list-group-item active">
						<i class="fas fa-money-bill-alt"></i> My Credits<i class="epi-plus-squared-alt epi pull-right"></i></a>
					</ul>

					<div class="collapse dropdown" id="MyCredits">
						<ul class="list-group">
							<a href="" class=" list-group-item" id="Top_Up">Top Up</a>
							<a href="" class=" list-group-item" id="Credit_History">Credit History</a>
							<a href="" class="[:ac_history:] list-group-item" id="Top_Up_History">Top Up History</a>
						</ul>
					</div>
				</div>

				<div style="border-top: 1px solid #ddd;">	
					<ul class="list-group btn" data-toggle="collapse" data-target="#MyRewards" aria-expanded="false" aria-controls="collapseExample">
						<a class="list-group-item active">
							<i class="fas fa-gift"></i> My Rewards<i class="epi-plus-squared-alt epi pull-right"></i>
						</a>
					</ul>

					<div class="collapse dropdown" id="MyRewards">
						<ul class="list-group">
							<a href="" class=" list-group-item" id="Coupon">Coupon Code</a>
						</ul>
					</div>
				</div>
	
				<div style="border-top: 1px solid #ddd;">	
					<ul class="list-group btn" data-toggle="collapse" data-target="#MyAccount" aria-expanded="false" aria-controls="collapseExample">
						<a class="list-group-item active">
							<i class="fas fa-user"></i> My Account<i class="epi-plus-squared-alt epi pull-right"></i>
						</a>
					</ul>

					<div class="collapse dropdown" id="MyAccount">
						<ul class="list-group">
							<a href="" class=" list-group-item" id="Profile_Setting">Profile Setting</a>
							<a href="" class=" list-group-item" id="Address_Book">Address Book</a>
							<a href="" class=" list-group-item" id="Referral">Referral</a>
							<a href="" class=" list-group-item" id="Flyer_Request">Flyer Request
								<span class="badge" data-toggle="tooltip" data-original-title="Unclaim Flyer">0</span>  <!-- yz changes -->
							</a>
	  
							<a href="" class="[:ac_parcelreport:] list-group-item" id="Parcel_Report">
								Parcel Report
								<span class="badge" data-toggle="tooltip" data-original-title="Unseen Message">0</span> <!-- yz changes -->
							</a>
	  
						</ul>
					</div>
				</div>

				<div style="border-top: 1px solid #ddd;">	
					<ul class="list-group btn" data-toggle="collapse" data-target="#Tools" aria-expanded="false" aria-controls="collapseExample">
						<a class="list-group-item active">
							<i class="fas fa-wrench"></i> Tools <i class="epi-plus-squared-alt epi pull-right"></i>
						</a>
					</ul>

					<div class="collapse dropdown" id="Tools">
						<ul class="list-group">
							<a href="" class="list-group-item" id="Bulk_Delivery_Tools">Bulk Delivery Tools
							</a>
							<a href="" target="_blank" class="list-group-item" id="Widgets">Widgets</a>
							<a onclick = "window.open('http://wherevership.com/volumetricCalcualator', 'Wherevership  Calculator Popout', 'width=700, height=500')" style="cursor: pointer;" class="list-group-item" id="Volumetric_Calculator">Volumetric Calculator</a>
							<a href="" target="_blank" class="list-group-item" id="EasyTrack">EasyTrack</a>
							<a href="" target="_blank" class="[:ac_fragile:] list-group-item" id="Fragile_Logo">Fragile Logo</a>
						</ul>
					</div>
				</div>

				<div style="border-top: 1px solid #ddd;">	
					<ul class="list-group btn" data-toggle="collapse" data-target="#HelpSupport" aria-expanded="false" aria-controls="collapseExample">
						<a class="list-group-item active">
							<i class="fas fa-info-circle"></i> Help & Support<i class="epi-plus-squared-alt epi pull-right"></i>
						</a>
					</ul>

					<div class="collapse dropdown" id="HelpSupport">
						<ul class="list-group">
							<a href="" target="_blank" class="list-group-item" id="Contact_Us">Contact Us</a>
							<a href="" target="_blank" class="list-group-item" id="FAQ">FAQ</a>
							<a href="" target="_blank" class="list-group-item" id="Tutorial">Tutorial</a>
							<a href="" target="_blank" class="list-group-item" id="Tutorial">Tour Guide <span class="label label-success">New</span></a>
	
						</ul>
					</div>
				</div>
			</div>
	
		</div>
		
		<div class="col-md-10 col-xs-12 dashboard-wrapped padding-right-off" >
		
		  <div class="row dashoboard-account">
    <div class="container-fluid space-small" style="padding-bottom: 15px;">
	<style>
.table>thead:first-child>tr:first-child>th {
	text-align: center;
	border-right: 1px solid;
	border-color: #fff;
}

.table>tbody>tr>td {
	text-align: center;
	border-right: 1px solid #ddd;
}

.well {
	background-color: #ddd;
	margin-bottom: 0px;
}

tr#DetailRow>td {
    text-align: left;
}

button.close {
    position: absolute;
    right: 30px;
    z-index: 2;
}
#OrdDetailRow th {
    background-color: #DDD;
    color: #333;
    font-weight: normal;
}
.form-control-feedback.epi-info-circled { 
	position: absolute;
	padding-top: 8px;
	color: #d82b1f ;
	font-size: 18px;
}
</style>
<div> 
  
  <h2 class="dashboard-title">Unpaid Order & Invoices
    
  </h2>
  
   
</div>
</div>
<div class="clearfix"> 
  
  <div class="well col-xs-12 col-sm-8" onkeypress="return checkEnter(event)">
    <div class="hidden-xs">
      <div class="col-xs-3 padding-left-off">
        <select class="form-control" id="category" name="category" onchange="changeCategory()">    
			<option class='hidden-xs' value='1' >Order Date</option><option value='0' >Order No</option>
        </select>
      </div>
      <div id="searchfield_normal" class="input-group col-xs-9" >
		<div class="has-feedback">
        	<input class="form-control" type="text" name="search" placeholder="Order No"/>
			<span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
		</div>

        <span class="input-group-btn">
        <button class="btn btn-primary" type="button" onclick="orderlist.search()">Search</button>
        </span> </div>
      <div id="searchfield_calendar" class="input-group col-xs-9" style="display:none">
        <div class="row">
          <div class="col-xs-6 padding-off">
            <div class="form-group" style="margin-bottom:0px">
              <div class="input-group date">
                <div class="input-group-addon">From </div>
				<div class="has-feedback">
                	<input data-date-format="yyyy-mm-dd" readonly type="text" class="form-control" name="dateFrom" id="fromDate" size="16" name="dateFrom"/>
					<span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
				</div>
			  </div>
            </div>
          </div>
          <div class="col-xs-6 padding-right-off">
            <div class="form-group" style="margin-bottom:0px">
              <div class="input-group date">
                <div class="input-group-addon">To </div>
					<div class="has-feedback">
	                	<input data-date-format="yyyy-mm-dd" readonly type="text" class="form-control" name="dateTo" id="toDate" size="16" name="dateTo"/>
						<span class="epi-info-circled form-control-feedback hide"  aria-hidden="true"></span>
					</div>
              </div>
            </div>
          </div>
        </div>
        <span class="input-group-btn">
        <button class="btn btn-primary" type="button" onclick="orderlist.search()">Search</button>
        </span> </div>
    </div>
    <div class="visible-xs">
      <select class="form-control col-xs-12" id="category" name="category" onchange="changeCategory()">
		<option value='0' >Order No</option>
      </select>
      <div class="input-group col-xs-12">
        <input class="form-control" type="text" name="search2" placeholder="Order No"/>
        <span class="input-group-btn ">
        <button class="btn btn-primary" type="button" onclick="orderlist.search()">Search</button>
        </span> </div>
    </div>
  </div>
   
  
  <div class="well col-xs-12 col-sm-4">
	<select class="form-control" id="OSSelect" name="OSSelect" onchange="orderlist.statussort('')">
		<option value=''>Filter By Status</option><option value='1' Selected>Unpaid (0)</option><option value='2' >Paid (0)</option><option value='3' >Partially Paid (0)</option>
	</select>
  </div>
   
  <!-- /input-group --> 
  <!-- /.col-lg-6 --> 
  <div class="visible-xs">&nbsp;</div>
<div class="container-fluid">
<div class="form-inline pull-left hidden-xs" style="margin: 20px 0px;">
    <select class="form-control dashboard-bulk-action" id="bulkAction" name="bulkAction" style="width: 150px;">
		<option value='UsageStatement' selected>Usage Statement</option>
    </select>
    <button onclick='performBulkAction(bulkAction.value)' class="btn btn-default">Apply</button>
  </div>

<div class="pull-right hidden-xs">
  <ul class="pagination">
    
  </ul>
</div>


<div class="form-inline pull-right hidden-xs" style="margin: 20px 20px;"> Listing Per Page :
  <select class="form-control" id="resultLimit" name="resultLimit" onchange="orderlist.resultLimit(this.value)">
	<option value='10' Selected>10</option><option value='50' >50</option><option value='100' >100</option><option value='150' >150</option>
  </select>
</div>
<table id="myTable" class="table table-striped" width="100%">
  <thead>
    <tr>
      <th width="5%" class="hidden-xs"><input type='checkbox' name='checkAllOrderOrder' id='checkAllOrder' onclick="checkAllOrderBox()"></th>
      <th width="15%">Order No</th>
      <th class="hidden-xs" width="20%">Order Date</th>
      <th class="hidden-xs" width="12%">Item(s)</th>
      <th class="hidden-xs" width="20%">Status</th>
      <th class="hidden-xs" style="text-align:right" width="15%">Total (RM)</th>
      <th class="visible-xs" width="67%">Order Summary</th>
      <th width="18%"></th>
    </tr>
  </thead>
  <tbody>
    
  <tr><td colspan='7'>No Record Found.</td></tr>
    </tbody>
  
</table>
<div class="form-inline pull-left" style="margin: 20px 0px;">
    <select class="form-control dashboard-bulk-action" id="bulkAction2" name="bulkAction2" onchange="" style="width: 150px;">
		<option value='UsageStatement' selected>Usage Statement</option>
    </select>
    <button onclick='performBulkAction(bulkAction2.value)' class="btn btn-default">Apply</button>
  </div>
  <div class="form-inline visible-xs pull-right"> Listing :
   <select class="form-control" id="resultLimit" name="resultLimit" onchange="orderlist.resultLimit(this.value)">
	<option value='10' Selected>10</option><option value='50' >50</option><option value='100' >100</option><option value='150' >150</option>
   </select>
  </div>

<div class="dashboard-pagination">
  <ul class="pagination">
    
  </ul>
</div>

<div class="form-inline pull-right hidden-xs" style="margin: 20px 20px;"> Listing Per Page :
  <select class="form-control" id="resultLimit" name="resultLimit" onchange="orderlist.resultLimit(this.value)">
	<option value='10' Selected>10</option><option value='50' >50</option><option value='100' >100</option><option value='150' >150</option>
  </select>
</div>
<div class="clearfix"></div>
<ol class="breadcrumb" style="font-size:11px; vertical-align:middle;">
  <li><img src="https://secure.easyparcel.my/pass/application/source/Malaysia/img/detail-icon-new.png" style="vertical-align:middle;" /> Detail</li>
  <li><i class="epi-download" style="font-size: 14px;color: #B4B4B4;"></i> Download Statement</li>
</ol>
</div>
<div id="dialog"></div>
<script>
<!-- checkbox usage START-->
var lastChecked = null;
    
$(document).ready(function() {
	var $checkbox = $('input[name=checkUsagedownload]');
	$checkbox.click(function(e) {
		if(!lastChecked) {
			lastChecked = this;
			return;
		}

		if(e.shiftKey) {
			var start = $checkbox.index(this);
			var end = $checkbox.index(lastChecked);

			$checkbox.slice(Math.min(start,end), Math.max(start,end)+ 1).prop('checked', lastChecked.checked);

		}

		lastChecked = this;
	});
});
<!-- checkbox usage END -->

var orderlist = {
	Detail : function(ref_id){
		var listrow = document.getElementsByClassName("listrow-"+ref_id);
		if($($(listrow).find(".action .mini img")).attr("src") == "https://secure.easyparcel.my/pass/application/source/Malaysia/img/detail-icon-minus.png"){
			orderlist.RemoveDetail();
		}else{			
			orderlist.RemoveDetail();
			$(listrow).after(
				'<tr id="OrdDetailRow"><td colspan="7"><img src="https://secure.easyparcel.my/pass/application/source/Malaysia/img/ajax-loader.gif" /></td></tr>'
			);
			$.ajax({
				type : "post",
				url : "./?cp=MemberOrderDetail",
				data : {oid : $(listrow).attr("data-id")},
				success : function(result){
					$($(listrow).find(".action .mini img")).attr("src","https://secure.easyparcel.my/pass/application/source/Malaysia/img/detail-icon-minus.png");
					$("#OrdDetailRow").find("td").html(result);
			}
		}).fail(function(){
		swal({
				title: 'Error',
				type: 'error',
				html: 'fail',
				confirmButtonColor: '#4e97d8'
				})
		});
	}
	},
	
	statussort : function(key){
		if(key == ''){
			key = $('#OSSelect').val();
		}
		var url = QueryString(window.location.href);
		var os = key;
		var qs = "";
		for(p in url.qs){
			if(p != "sc" && p != "os" && p != "sf" && p != "lpg"){
				if(qs.length > 0) qs += "&";
				qs += p + "=" + url.qs[p]
			};
		}
		window.location.href = url.link + "?" + qs + (os.length > 0 ? "&os=" + os : "");
	},
	
	resultLimit : function(limit){
		var url = QueryString(window.location.href);
		var rl = limit;
		var qs = "";
		for(p in url.qs){
			if(p != "lpg"&& p != "rl"){
				if(qs.length > 0) qs += "&";
				qs += p + "=" + url.qs[p]
			};
		}
		window.location.href = url.link + "?" + qs + (rl.length > 0 ? "&rl=" + rl : "");
	},
	
	search : function(){
		var message = "";
		var url = QueryString(window.location.href);
		var sc = $("[name=search]").val();
		if(sc == ""){
			sc = ($("[name=search2]").val().trim());
		}
		var sf = ($("[name=category]").val().trim());
		if (sf == '1'){
			if($("[name=dateFrom]").val().trim() != "" && $("[name=dateTo]").val().trim() != ""){
				sc = 'From-'+($("[name=dateFrom]").val().trim())+'To-'+($("[name=dateTo]").val().trim());
			}else{
				message+="Please Select The From & To Date.";
				CheckNull($("[name=dateFrom]"),$("[name=dateTo]"),"0");
				sc = "fail";
			}
		}
		
		if(sc == ""){
			message+="No Search Key Is Inserted.</br>";
			CheckNull("0","0",$("[name=search]"));
		}
		
		if(message != ""){
			swal({
				title: 'Oops',
				type: 'error',
				html: '' + message,
				confirmButtonColor: '#4e97d8'
				})
			return false;
		}else{
			clearClass();
			var qs = "";
			for(p in url.qs){
				if(p != "sc" && p != "sf" && p != "os" && p != "lpg"){
					if(qs.length > 0) qs += "&";
					qs += p + "=" + url.qs[p]
				};
			}
			window.location.href = url.link + "?" + qs + (sc.length > 0 ? "&sc=" + sc : "")+ (sf.length > 0 ? "&sf=" + sf : "");
		}
	},
	
	Del :function(obj) {
		//alert($(obj).html());
		/*
		$('#popupbox .modal-header h3').html("Confirm delete this unpaid order?");
		$("#popupbox .modal-body").html("Are you SURE?");
		$("#popupbox .modal-footer").html('<button type="button" class="btn btn-primary" dt-id="'+$(obj).attr("dt-id")+'" onclick="orderlist.Delete(this)">OK</button>' + 
		'<button type="button" class="btn btn-default" data-dismiss="modal" aria-hidden="true">Cancel</button>');
		$('#popupbox').modal('toggle');//*/
		swal({
			title: 'Confirm delete this unpaid order?',
			text: "Are you SURE?",
			type: 'warning',
			showCancelButton: true,
			confirmButtonColor: '#4e97d8',
			confirmButtonText: 'Yes',
			cancelButtonText: 'Cancel'
			}).then(function() {
				id = $(obj).attr("dt-id");
				orderlist.Delete(id);
			})
	},
	
Delete :function (obj) {
	var
	type ="post",
	url = "./?ac=doDeleteInvoice",
	data ={id},
	callback = function(result){
			if($.trim(result) == "pass"){
				swal({
					title: 'Success',
					type: 'success',
					html: 'The item has been succesfully deleted!',
					confirmButtonColor: '#4e97d8'
					}).then(function() {
						window.location.reload();
					})
			}else{
				swal({
					title: 'Oops',
					type: 'error',
					html: '' + result,
					confirmButtonColor: '#4e97d8'
				})
			} 
		};
		General.loadAjax(type,url,data,callback);
	},	
	
	RemoveDetail : function(){
		$("#OrdDetailRow").remove();
		$('.action .mini').html("<img src='https://secure.easyparcel.my/pass/application/source/Malaysia/img/detail-icon-new.png'>");
	},
};
var ordershipmentlist = {
	Detail : function(obj){
		var parent = $(obj).parent();
		if($(parent).find('a.pull-right img').first().attr('src') == "https://secure.easyparcel.my/pass/application/source/Malaysia/img/detail-icon-minus.png"){
			$(parent).find('a.pull-right img').first().attr("src", "https://secure.easyparcel.my/pass/application/source/Malaysia/img/detail-icon-new.png");
			ordershipmentlist.RemoveDetail();
		}else{
			ordershipmentlist.RemoveDetail();
			$($(parent).find('a.pull-right img').first()).parent().parent().parent().after(
				'<tr id="DetailRow"><td colspan="9"><img src="https://secure.easyparcel.my/pass/application/source/Malaysia/img/ajax-loader.gif" /></td></tr>'
			);
			$.ajax({
				type : "post",
				url : "./?cp=MemberShipmentDetail",
				data : {iid : $(obj).attr("data-id")},
				success : function(result){
					$("#DetailRow").find("td").html(result);
					if($(parent).find('a.pull-right img').first().attr('src') == "https://secure.easyparcel.my/pass/application/source/Malaysia/img/detail-icon-new.png"){
						$(parent).find('a.pull-right img').first().attr("src", "https://secure.easyparcel.my/pass/application/source/Malaysia/img/detail-icon-minus.png");
					}
				}
			}).fail(function(){
			swal({
				title: 'Error',
				type: 'error',
				html: 'fail',
				confirmButtonColor: '#4e97d8'
				})
			});
		}
	},
	
	RemoveDetail : function(){
		$("#DetailRow").prev().find('a.pull-right img').first().attr("src", "https://secure.easyparcel.my/pass/application/source/Malaysia/img/detail-icon-new.png");
		$("#DetailRow").remove();
		
	},
		
	search : function(){
		var message = "";
		var url = QueryString(window.location.href);
		var sc = $("[name=search]").val();
		if(sc == ""){
			sc = ($("[name=search2]").val().trim());
		}
		var sf = ($("[name=category]").val().trim());
		if (sf == '1'){
			sc =  'From='+($("[name=dateFrom]").val().trim())+'To='+($("[name=dateTo]").val().trim());
		}
		
		if(sc == ""){
			message+="No Search Key Is Inserted.</br>";
			if(message != ""){
				swal({
					title: 'Oops',
					type: 'error',
					html: '' + message,
					confirmButtonColor: '#4e97d8'
				})
				return false;
			}
		}else{
			var qs = "";
			for(p in url.qs){
				if(p != "sc" && p != "lpg"){
					if(qs.length > 0) qs += "&";
					qs += p + "=" + url.qs[p]
				};
			}
			window.location.href = url.link + "?" + qs + (sc.length > 0 ? "&sc=" + sc : "");
		}
	},

	Track : function(ref,awb,courier){
			$.ajax({
				type : "post",
				url : "./?ac=doTrackAwb",
				data : {
					courier : courier,
				},
				success : function(res){
					//var myWindow = window.open("./?pg=Track&t="+res+"/"+awb, "Easyparcel Track Popout", "width=700, height=400");
					var myWindow = window.open("./?pg=Track&t="+res+"/"+awb, '_blank');
					if(myWindow == null || typeof(myWindow)=='undefined'){
						swal({
							title: 'Oops',
							type: 'info',
							html: 'We found out your browser disabled the pop-up settings.<br>Please disable your pop-up blocker and have another try.',
							confirmButtonColor: '#4e97d8'
						})
					}
				}
			}).fail(function(){
				swal({
					title: 'Error',
					type: 'error',
					html: 'Fail',
					confirmButtonColor: '#4e97d8'
					})
			});
		}
};

function CheckNull(obj,obj1,obj2){
	var from  = $("[name=dateFrom]");
	var to  = $("[name=dateTo]");
	var sc  = $("[name=search]");
	if(obj == "0" && obj1 == "0"){
		if(General.isTextEmpty($(obj2))){
			doFail(obj2);
		}else{
			clearClass(obj2);
		}
	}else{
		if(General.isTextEmpty($(obj))){
			doFail(obj);
		}else{
			clearClass(obj);
		}
		if(General.isTextEmpty($(obj1))){
			doFail(obj1);
		}else{
			clearClass(obj1);
		}
	}
}

function doFail(obj){
	$(obj).addClass("fail");
	$(obj).removeClass("padding");
	$(obj).removeClass("pass");
	$(obj).css("border-color","#F00");
	$(obj).parent().children().eq(1).removeClass("hide");
}

function clearClass(){
	var names = ["dateFrom","dateTo","search"];
	for (i = 0; i < names.length; i++) { 
		$("[name="+names[i]+"]").removeClass("pass");
		$("[name="+names[i]+"]").removeClass("fail");
		$("[name="+names[i]+"]").removeClass("padding");
		$("[name="+names[i]+"]").css("border-color","");
		$("[name="+names[i]+"]").parent().children().eq(1).addClass("hide");
	}
}

function QueryString(url){
	var link = url.split("?");
	var url = {link: link[0], qs : {}};
	if(link[1] == null) return url;
	var qs = link[1].split("&");
	for(var i = 0; i < qs.length;i++){
		var param = qs[i].split("=");
		if(param[0] != null) url.qs[param[0]] = param[1];
	}
	return url;
}

function RemoveDetail(){
	$("#DetailRow").remove();
	$('.action .mini').html("<img src='https://secure.easyparcel.my/pass/application/source/Malaysia/img/detail-icon-new.png'>");
}

function checkAllOrderBox(){
	var checkboxes = document.getElementsByName('checkUsagedownload');
	if(document.getElementById('checkAllOrder').checked){
		for(var i = 0; i < checkboxes.length; i++){
			if(checkboxes[i].type == 'checkbox'){
				checkboxes[i].checked = true;
			}
		}
	}else{
		for (var i = 0; i < checkboxes.length; i++) {
			console.log(i)
			if (checkboxes[i].type == 'checkbox'){
				checkboxes[i].checked = false;
			}
		}
	}
}

function checknow(id){
	if(document.getElementById('checkAllOrder').checked){
		document.getElementById('checkAllOrder').checked=false;
	}else{
		var checkboxes = document.getElementsByName('checkUsagedownload');
		var allchecked=0;
		for(var i = 0; i < checkboxes.length; i++){
			if(checkboxes[i].type == 'checkbox'){
				if(checkboxes[i].checked == false){
					allchecked=1;
				}
			}
 		}

		if(allchecked==0){
			document.getElementById('checkAllOrder').checked=true;
		}
	}
}

function changeCategory(){
	var sf = ($("[name=category]").val().trim());
	if(sf == 1){
		$('#searchfield_normal').attr('style','display: none');
		$('#searchfield_calendar').attr('style','display: ""');
	}else{
		$('#searchfield_normal').attr('style','display: ""');
		$('#searchfield_calendar').attr('style','display: none');
	}
}

function UsageStatement(){
	var checkboxes = document.getElementsByName('checkUsagedownload');
	id="";
	count=0;
	
	for(var i = 0; i < checkboxes.length; i++){
		if(checkboxes[i].checked == true){
			var myElem = document.getElementById((checkboxes[i].id));
			if (myElem != null){
				if(id!=""){
					id=id+","+document.getElementById((checkboxes[i].id)).value;
				}else{
					id=document.getElementById((checkboxes[i].id)).value;
				}
				count++;
			}
		}
	}
   	
	if(id==""){
		swal({
			title: 'Oops',
			type: 'error',
			html: 'Please select the order invoices which you would like to download.',
			confirmButtonColor: '#4e97d8'
			})
	}else{
		window.open("?ac=UsageStatement&id="+id);
	}
}

$(function(){
	$( "#fromDate" ).datepicker({dateFormat: 'yy-mm-dd', maxDate: '+0d'});
    $( "#toDate" ).datepicker({dateFormat: 'yy-mm-dd', maxDate: '+0d'});
	changeCategory();
});

function checkEnter(e) {
    if(e.keyCode == 13) {
		orderlist.search();
    }
}

function performBulkAction(value){
	switch(value){
		case "UsageStatement" : UsageStatement(); break;
		default : alert("Please select a valid action."); break;
	}
}
</script>
 </div>
  </div>
  </div>
</div>

</div>
		
		
		</div>
		
	    </div>
		
		
			<div class="page-copyright">
				<div class="container">
					<p class="text-center small">Created & Powered By Wherevership Sdn Bhd ().<br>
						All Copyrights Reserved &copy; 2018</p>
				</div>
			</div>
	<div class="list-fix hidden-xs" id="list-fix">
		<div class="wrapper back-top"> <span id="top-link-block"> <a href="#top" style="color: #fff;" class="scrollToTop"> <i class="fas fa-angle-up"></i></a> </span>
			<div class="tooltip">Back To Top</div>
		</div>
	</div>
	
	<script>
		$(document).ready( function() {
    $(".back-top").hide(); //hide your div initially
	var topOfOthDiv = 1;
    $(window).scroll(function() {
        if($(window).scrollTop() > topOfOthDiv) { //scrolled past the other div?
            $(".back-top").show(); //reached the desired point -- show div
        }
		if($(window).scrollTop() < topOfOthDiv) { //scrolled past the other div?
            $(".back-top").hide(); //reached the desired point -- show div
        }
    });
});


 $('.scrollToTop').click(function(){
        $('html, body').animate({scrollTop : 0},800);
        return false;
    });
	
	</script>
	
	
	
	
	
	</body>
	
	
<html>